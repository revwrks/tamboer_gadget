import{u as l,G as x,v as M,c as p,F,P as w,a as g,D as I,o as f,t as r,j as n,w as s,b3 as i,I as m}from"./app.nOLxvhWu.js";import{s as L}from"./index.Br3pg5oH.js";import{s as c}from"./index.DvIYg5kk.js";import"./index.CYijPz_l.js";import"./index.Bx_AKhjG.js";import"./index.C_hQ_PNB.js";import"./index.5cZuQ5Px.js";import"./index.e64FBzf4.js";import"./index.CjIJRkhO.js";import"./index.pxpWFvq0.js";import"./index.Cy1QRz5H.js";import"./index.DRGJws2w.js";import"./index.B50m-utj.js";import"./index.DdSe4A1_.js";import"./index.4oY6l8P_.js";import"./index.DcXiv5Mf.js";import"./index.CWP4Ac8B.js";import"./index.C9D36cqp.js";import"./index.D5s4REby.js";import"./index.2k1OPD85.js";import"./index.B3MkBQPq.js";const T={class:"card"},k=g("h2",{class:"text-xl font-bold mb-4"},"Monthly Sales Reports",-1),N={class:"text-lg font-semibold mb-2"},tt={__name:"Laporan",setup(R){const d=l([]),h=l(null),b=l({global:{value:null,matchMode:"contains"}}),y=t=>t.toLocaleString("id-ID",{month:"long",year:"numeric"}),v=l((t=>{const o=[],a=new Date;for(let e=0;e<t;e++){const _=new Date(a.getFullYear(),a.getMonth()-e,1);o.push({label:y(_),date:_})}return o})(3)),D=async()=>{try{d.value=[];for(const t of v.value){const o=await I.get("/api/report",{params:{month:t.date.getMonth()+1,year:t.date.getFullYear()}});d.value.push({month:t.label,...o.data})}}catch(t){console.error("Error fetching report data:",t)}};x(()=>{D()}),M();function u(t){return t!=null?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round(t)):"-"}return(t,o)=>(f(),p("div",T,[k,(f(!0),p(F,null,w(d.value,a=>(f(),p("div",{key:a.month,class:"mb-6"},[g("h3",N,r(a.month),1),n(i(L),{ref_for:!0,ref:"dt",selection:h.value,"onUpdate:selection":o[0]||(o[0]=e=>h.value=e),value:[a],dataKey:"id",paginator:!1,filters:b.value},{default:s(()=>[n(i(c),{field:"phones_sold",header:"Unit Terjual",sortable:""},{body:s(e=>[m(r(e.data.phones_sold),1)]),_:1}),n(i(c),{field:"total_income",header:"Total Pemasukan",sortable:""},{body:s(e=>[m(r(u(e.data.total_income)),1)]),_:1}),n(i(c),{field:"total_expenses",header:"Total Pengeluaran",sortable:""},{body:s(e=>[m(r(u(e.data.total_expenses)),1)]),_:1}),n(i(c),{field:"profit",header:"Keuntungan",sortable:""},{body:s(e=>[m(r(u(e.data.profit)),1)]),_:1})]),_:2},1032,["selection","value","filters"])]))),128))]))}};export{tt as default};
