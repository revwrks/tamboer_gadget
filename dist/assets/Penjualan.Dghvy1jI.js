import{s as $}from"./index.BbmNYN32.js";import{s as N}from"./index.1bV2Ar9K.js";import{s as M}from"./index._5o7aNuM.js";import{s as U}from"./index.CQlLIbLC.js";import{s as F}from"./index.Ds35Vzkf.js";import{s as R}from"./index.C9N4WFBj.js";import{s as B}from"./index.BcT575Nn.js";import{u,G as E,v as H,b1 as O,c as q,a as s,k as t,w as r,D as b,o as J,O as c,t as p,b2 as A,a9 as G}from"./app.5WlxmkjR.js";import{s as K}from"./index.BG__glz_.js";import"./index.DA1NGDc9.js";import"./index.DOTFLFqf.js";import"./index.Bua6rbdJ.js";import"./index.COWMYEng.js";import"./index.B6mBdOK6.js";import"./index.EOTHL6gN.js";import"./index.C8MQ2szf.js";import"./index.DFyDvela.js";import"./index.utu5xtgu.js";import"./index.CMcXutYM.js";import"./index.jgIYzqYJ.js";import"./index.DdXA0FTl.js";import"./index.DRWH-0hi.js";import"./index.B_xps0mq.js";import"./index.B4UvZ2K7.js";import"./index.C-DrSNUl.js";import"./index.DNyY9_EJ.js";var W={name:"Calendar",extends:K,mounted:function(){console.warn("Deprecated since v4. Use DatePicker component instead.")}};const z={class:"card"},Q={class:"flex flex-wrap gap-2 items-center justify-between"},X=s("h4",{class:"m-0"},"Manage Penjualan",-1),Y={class:"flex flex-col gap-6"},Z=s("label",{for:"tanggal",class:"block font-bold mb-3"},"Tanggal Terjual",-1),ee=s("label",{for:"harga_jual",class:"block font-bold mb-3"},"Harga Jual",-1),Le={__name:"Penjualan",setup(k){const f=u({global:{value:null,matchMode:G.CONTAINS}}),d=u(),v=async()=>{try{const e=await b.get("/api/penjualan");d.value=e.data}catch(e){console.error("Error fetching penjualan:",e)}};E(v);const _=H(),j=u(),m=u(!1),n=u({}),g=u();O(()=>{var l;const e=((l=f.value.global.value)==null?void 0:l.toLowerCase())||"";return d.value.filter(a=>a.stok_hp.imei.toLowerCase().includes(e)||a.stok_hp.brand.toLowerCase().includes(e)||a.stok_hp.nama.toLowerCase().includes(e)||a.stok_hp.warna.toLowerCase().includes(e)||a.stok_hp.harga_masuk.toString().toLowerCase().includes(e)||a.harga_jual.toString().toLowerCase().includes(e)||a.users.nama.toLowerCase().includes(e))});const h=u(!1);function w(e){return e!=null?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round(e)):"-"}function P(e){n.value={...e},m.value=!0}function y(){m.value=!1,h.value=!1}function C(){h.value=!0,n!=null&&n.value.id_penjualan&&b.put(`/api/penjualan/${n.value.id_penjualan}`,{...n.value}).then(()=>{const e=D(n.value.id_penjualan);d.value[e]=n.value,v(),_.add({severity:"success",summary:"Successful",detail:"Penjualan Updated",life:3e3})}).catch(e=>{_.add({severity:"error",summary:"Error",detail:"Failed to update penjualan",life:3e3})}),m.value=!1,n.value={}}function D(e){let l=-1;for(let a=0;a<d.value.length;a++)if(d.value[a].id_penjualan===e){l=a;break}return l}return(e,l)=>{const a=B,L=R,x=F,i=U,V=M,I=N,T=$;return J(),q("div",null,[s("div",z,[t(L,{class:"mb-6"},{start:r(()=>[t(a,{label:"Delete",icon:"pi pi-trash",severity:"secondary",onClick:e.confirmDeleteSelected,disabled:!g.value||!g.value.length},null,8,["onClick","disabled"])]),_:1}),t(V,{ref_key:"dt",ref:j,selection:g.value,"onUpdate:selection":l[1]||(l[1]=o=>g.value=o),value:d.value,dataKey:"id",paginator:!0,rows:10,filters:f.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} penjualan"},{header:r(()=>[s("div",Q,[X,t(x,{modelValue:f.value.global.value,"onUpdate:modelValue":l[0]||(l[0]=o=>f.value.global.value=o),placeholder:"Search...",class:"w-full md:w-auto"},null,8,["modelValue"])])]),default:r(()=>[t(i,{field:"tanggal",header:"Tanggal Terjual",sortable:""},{body:r(o=>[c(p(new Date(o.data.tanggal).toLocaleDateString("id-ID")),1)]),_:1}),t(i,{field:"users.nama",header:"Sales",sortable:""},{default:r(()=>[c(p(e.slotProps.data.users.nama||"Unknown"),1)]),_:1}),t(i,{field:"stok_hp.nama",header:"Nama HP",sortable:""},{default:r(()=>[c(p(e.slotProps.data.stok_hp.nama),1)]),_:1}),t(i,{field:"stok_hp.warna",header:"Warna",sortable:""},{default:r(()=>[c(p(e.slotProps.data.stok_hp.warna),1)]),_:1}),t(i,{field:"stok_hp.imei",header:"IMEI",sortable:""},{default:r(()=>[c(p(e.slotProps.data.stok_hp.imei),1)]),_:1}),t(i,{field:"harga_jual",header:"Harga Jual",sortable:""},{body:r(o=>[c(p(w(o.data.harga_jual)),1)]),_:1}),t(i,{exportable:!1,style:{"min-width":"12rem"}},{body:r(o=>[t(a,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:S=>P(o.data)},null,8,["onClick"]),t(a,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:S=>e.confirmDeletePenjualan(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value","filters"])]),t(T,{visible:m.value,"onUpdate:visible":l[4]||(l[4]=o=>m.value=o),style:{width:"450px"},header:"Penjualan Details",modal:!0},{footer:r(()=>[t(a,{label:"Cancel",icon:"pi pi-times",text:"",onClick:y}),t(a,{label:"Save",icon:"pi pi-check",onClick:C})]),default:r(()=>[s("div",Y,[s("div",null,[Z,t(A(W),{id:"tanggal",modelValue:n.value.tanggal,"onUpdate:modelValue":l[2]||(l[2]=o=>n.value.tanggal=o),modelModifiers:{trim:!0},required:"",fluid:""},null,8,["modelValue"])]),s("div",null,[ee,t(I,{id:"harga_jual",modelValue:n.value.harga_jual,"onUpdate:modelValue":l[3]||(l[3]=o=>n.value.harga_jual=o),required:"",mode:"currency",currency:"IDR",locale:"id-ID",fluid:""},null,8,["modelValue"])])])]),_:1},8,["visible"])])}}};export{Le as default};
